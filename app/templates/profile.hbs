<main class="container main-container profile">
    {{!--Profile picture and information--}}
    <section class="row profile-block">
        {{! Profile picture and overlay }}
        <div class="col-sm-3">
            <div class="profile-picture-container" {{action "showEditProfilePictureModal"}}>
            <img src="{{model.userInfo.ImagePath}}" alt="Avatar" class="image" id="profilePicture">
            <div class="overlay">
                <div class="text">Click here to change profile picture</div>
            </div>
            </div>
        </div>
        {{! User main info }}
        <div class="col-sm-9 profile-block-info">
            <div class="row">
                <div class="col-sm-12">
                    <div class="user-name">{{model.userInfo.FirstName}} {{model.userInfo.LastName}} {{if  model.userInfo.NickName "("}}{{model.userInfo.NickName}}{{if model.userInfo.NickName ")"}}</div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="user-position">
                        {{#if model.userInfo.IsFaculty}}
                            {{model.userInfo.JobTitle}}
                        {{else if model.userInfo.IsStudent}}
                            {{model.userInfo.Class}}
                        {{else if model.userInfo.isAlumni}}
                            {{model.userInfo.}} 
                        {{/if}}
                    </div>
                </div>
            </div>
            {{! Display users social media links if provided }}
            <div class="row row-centered user-links">
                    {{#if model.userInfo.Facebook}}
                        <div class="col-xs-3 col-no-padding col-centered">
                            <div class="social-media-buttons">
                                <a href="https://www.facebook.com/{{model.userInfo.Facebook}}">Facebook</a>
                            </div>
                        </div>
                    {{/if}}
                    {{#if model.userInfo.Twitter}}
                        <div class="col-xs-3 col-no-padding col-centered">
                            <div class="social-media-buttons">
                                <a href="https://twitter.com/{{model.userInfo.Twitter}}" >Twitter</a>
                            </div>
                        </div>
                    {{/if}}
                    {{#if model.userInfo.LinkedIn}}
                        <div class="col-xs-3 col-no-padding col-centered">
                            <div class="social-media-buttons">
                                <a href="https://www.linkedin.com/in/{{model.userInfo.LinkedIn}}">LinkedIn</a>
                            </div>
                        </div>
                    {{/if}}
                    {{#if model.userInfo.Instagram}}
                        <div class="col-xs-3 col-no-padding col-centered">
                            <div class="social-media-buttons">
                                <a href="https://www.instagram.com/{{model.userInfo.Instagram}}">Instagram</a>
                            </div>
                        </div>
                    {{/if}}
            </div>
            <div class="row profile-action-block"> 
                <div class="col-xs-4 profile-action-button-container">
                    <div class="profile-action-button"{{action "showEditLinksModal"}}>
                        <div class="action-icon">
                            <img src="http://cdn.onlinewebfonts.com/svg/img_52.svg" class="action-icon-image">
                        </div>
                        <div class="action-link">Edit your social media links</div>
                    </div>
                </div>
                <div class="col-xs-4 profile-action-button-container">
                    <div class="profile-action-button"{{action "showEditProfilePictureModal"}}>
                        <div class="action-icon">
                            <img src="http://simpleicon.com/wp-content/uploads/camera.svg" class="action-icon-image">
                        </div>
                        <div class="action-link">Update your profile picture</div>
                    </div>
                </div>
                <div class="col-xs-4 profile-action-button-container">
                    <div class="profile-action-button"{{action "toggleMobilePhonePrivacy"}}>
                        <div class="action-icon">
                            <img src="http://www.clker.com/cliparts/0/f/c/2/1195445181899094722molumen_phone_icon.svg.hi.png" class="action-icon-image">
                        </div>
                        <div class="action-link">{{if model.userInfo.IsMobilePhonePrivate "Show mobile phone number" "Hide mobile phone number"}}</div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    {{!--Personal Information--}}
    <section class="row profile-block">
            <div class="col-sm-5 block-header">Personal Information</div>
            <div class="col-sm-3 phone-privacy-button">
                <button class="btn btn-primary" {{action "toggleMobilePhonePrivacy"}}>{{if model.userInfo.IsMobilePhonePrivate "Show mobile phone number" "Hide mobile phone number"}}</button>
            </div>
            <div class="col-sm-4 success-message">
                {{if phonePrivacySuccessMessage phonePrivacySuccessMessage}}
            </div>
            <div class="row">
            <div class="col-sm-4 col-no-padding">
                {{#if model.userInfo.IsStudentOrAlumni}}
                    <div class="row personal-information-entry">
                        <div class="col-xs-4 col-no-padding personal-information-entry-key">Majors</div>
                        <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.Major}}</div>
                    </div>
                    <div class="row personal-information-entry">
                        <div class="col-xs-4 col-no-padding personal-information-entry-key">Cell Phone</div>
                        <div class="col-xs-8 col-no-padding personal-information-entry-value">{{if model.userInfo.formattedMobilePhone model.userInfo.formattedMobilePhone model.userInfo.MobilePhone}}</div>
                    </div>
                {{/if}}
                {{#if model.userInfo.IsFaculty}}
                    <div class="row personal-information-entry">
                        <div class="col-xs-4 col-no-padding personal-information-entry-key">Department</div>
                        <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.OnCampusDepartment}}</div>
                    </div>
                    <div class="row personal-information-entry">
                        <div class="col-xs-4 col-no-padding personal-information-entry-key">Office Phone</div>
                        <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.OnCampusPhone}}</div>
                    </div>
                {{/if}}
                    <div class="row personal-information-entry">
                        <div class="col-xs-4 col-no-padding personal-information-entry-key">Home Phone</div>
                        <div class="col-xs-8 col-no-padding personal-information-entry-value">{{if model.userInfo.formattedHomePhone model.userInfo.formattedHomePhone model.userInfo.HomePhone}}</div>
                    </div>
                    <div class="row personal-information-entry">
                        <div class="col-xs-4 col-no-padding personal-information-entry-key">Email</div>
                        <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.EmailUserName}}@gordon.edu</div>
                    </div>
            </div>
        </div>
    </section>

    <section class="row profile-block">
            <div class="col-xs-12 block-header">
                Home Address
            </div>
            <div class="col-xs-12 col-no-padding">
                <div class="row personal-information-entry">
                    <div class="col-xs-4 col-no-padding personal-information-entry-key">Street</div>
                    <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.HomeStreet1}}</div>
                </div>
                <div class="row personal-information-entry">
                    <div class="col-xs-4 col-no-padding personal-information-entry-key">City</div>
                    <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.HomeCity}}</div>
                </div>
                <div class="row personal-information-entry">
                    <div class="col-xs-4 col-no-padding personal-information-entry-key">State</div>
                    <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.HomeState}}</div>
                </div>
            </div>
    </section>

    <section class="row profile-block">
                {{#if model.userInfo.OnOffCampus}}
                    <div class="col-xs-12 block-header">Campus Address</div>
                    <div class="col-xs-12 col-no-padding">
                        <div class="row personal-information-entry">
                            <div class="col-xs-4 col-no-padding personal-information-entry-key">Dorm</div>
                            <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.OnCampusBuilding}}</div>
                        </div>
                        <div class="row personal-information-entry">
                            <div class="col-xs-4 col-no-padding personal-information-entry-key">Room</div>
                            <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.OnCampusRoom}}</div>
                        </div>
                    </div>
                {{/if}}
                {{#if model.userInfo.IsFaculty}}
                    <div class="col-xs-12 block-header">On Campus Info</div>
                    <div class="col-xs-12 col-no-padding">
                        <div class="row personal-information-entry">
                            <div class="col-xs-4 col-no-padding personal-information-entry-key">Office</div>
                            <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.OnCampusBuilding}} {{model.userInfo.OnCampusRoom}}</div>
                        </div>
                        <div class="row personal-information-entry">
                            <div class="col-xs-4 col-no-padding personal-information-entry-key">Office Phone</div>
                            <div class="col-xs-8 col-no-padding personal-information-entry-value">{{model.userInfo.OnCampusPhone}}</div>
                        </div>
                    </div>
                {{/if}}
    </section>

    {{!--Activities--}}
    
    <section class="profile-block">
        <div class="row round-top-coners">
            <div class="block-header col-sm-12">
                Activities
            </div>
        </div>
        {{#each model.memberships as |activity|}}
            <div class="row activity-entry bootstrap-tester">
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-xs-2 col-no-padding bootstrap-tester">
                            <img src="{{activity.membership.ActivityImagePath}}" class="activity-image" alt="{{activity.membership.ActivityDescription}} profile picture">
                        </div>
                        <div class="col-xs-10">
                                    <div class="activity-entry-title">{{activity.membership.ActivityDescription}} {{if activity.membership.privacy "(Hidden on your page)"}}</div>
                            <div class="row">
                                <div class="col-sm-6 col-no-padding">
                                    <div class="row activity-row2-mobile">
                                        <div class="activity-session col-xs-5 col-sm-12 col-no-padding">{{activity.membership.session}}</div>
                                            <div class="col-xs-7 col-no-padding col-only-sm"{{action "toggleClubPrivacy" activity}}>
                                            <div class="social-media-buttons">
                                                <div class="activity-privacy-button-mobile">{{if activity.membership.Privacy "Show this activity" "Hide this activity"}}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row col-xs-hide">
                                        <div class="col-sm-12">Group Contacts:</div>
                                    </div>
                                    <div class="row col-xs-hide">
                                        <div class="col-sm-12">
                                            <ul>
                                                {{#each activity.membership.groupAdminsEmail as |groupAdmin|}}
                                                    <li><a href="mailto:{{groupAdmin.Email}}">{{groupAdmin.FirstName}} {{groupAdmin.LastName}}</a></li>
                                                {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="row col-xs-hide">
                                        <div class="col-sm-12">Description:</div>
                                    </div>
                                    <div class="row col-xs-hide">
                                        <div class="col-sm-12">{{activity.membership.clubInfo.ActivityBlurb}}</div>
                                    </div>
                                    <div class="col-sm-2 col-xs-hide">
                                        <button class="btn view-club-button">{{#link-to "specific-activity" activity.membership.SessionCode activity.membership.ActivityCode}}View Club{{/link-to}}</button>
                                    </div>
                                    <div class="col-sm-3 col-xs-hide">
                                        <button class="btn club-privacy-button" {{action "toggleClubPrivacy" activity}}>{{if activity.membership.Privacy "Show this activity" "Hide this activity"}}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {{/each}}
    </section>



    <!-- Edit profile picture modal -->
    <div id="editProfilePictureModal" class="modal" onclick={{action "cancelEditProfilePicture"}}>
        <!-- Modal content -->
        <div class="modal-content">
            <div id="profile-modal-from-box" class="whitebox row">
                <form {{action "updatePicture" on="submit"}}>
                    {{#if errorMessage}}
                        <p id="error-message">{{errorMessage}}</p>
                    {{/if}}
                    <label for="image">Upload new profile picture</label>
                    <div class="input-group">
                        <label class="input-group-btn">
                            <span class="btn button-navy">
                                Browse{{input id="file" type="file" value=file multiple="false"}}
                            </span>
                        </label>
                        {{input value=file placeholder="No File Chosen" type="text" class="form-control" readonly="true"}}
                    </div>
                    <div class="image-cropper-wrapper">
                        <div class="image-cropper-container">
                            {{image-cropper image=file}}
                        </div>
                    </div>
                    <p class="form-note">Files acceptable: png, jpg, jpeg, bmp, gif</p>
                    <button class="btn button-navy form-button" {{action 'updatePicture'}}>Upload Picture</button>
                    <button class="btn button-cyan form-button form-cancel-button cancel-profile-picture-button">Cancel</button>
                </form>
                <div>
                    <button class="btn button-cyan form-button form-cancel-button" {{action "setPicturePrivacy"}}>{{if model.userInfo.show_img "Hide you profile picture" "Show your profile picture"}}</button>
                </div>
                {{#if profilePictureSuccessMessage}}
                    <div class="success-message">{{profilePictureSuccessMessage}}</div>
                {{/if}}
            </div>
        </div>
    </div>


    <!-- Edit social media links modal -->
    <div id="editLinksModal" class="modal" onclick={{action "hideEditLinksModal"}}>

        <!-- Modal content -->
        <div class="modal-content">
            <div class="row">
                <div class="col-sm-12 modal-title">Edit your links</div>
            </div>
            {{#if linksErrorMessage}}
                <p id="error-message">{{linksErrorMessage}}</p>
            {{/if}}
            {{#if linksSuccessMessage}}
                <div class="success-message">{{linksSuccessMessage}}</div>
            {{/if}}
            {{#each model.links as |link|}}
                <div class="row edit-links-row">
                    <div class="col-xs-5 links-title">{{link.type}}</div>
                    {{#if link.link}}
                        <div class="col-xs-3 edit-links-button-containers">
                            <button class="btn btn-primary edit-links-button" onclick={{action "changeSocialMediaLink" link}}>Edit</button>
                        </div>
                        <div class="col-xs-4 edit-links-button-containers">
                            <button class="btn button-danger edit-links-button" onclick={{action "updateLinks" "removed" link}}>Remove</button>
                        </div>
                    {{else}}
                        <div class="col-xs-7 edit-links-button-containers">
                            <button class="btn btn-success edit-links-button" onclick={{action "changeSocialMediaLink" link}}>Add</button>
                        </div>
                    {{/if}}
                </div>
                {{! form for entering data }}
                <div class="row edit-links-form-container col-no-padding hide">
                    <form class="edit-links-form" {{action "updateLinks" "updated" link on="submit"}}>
                            <div class="col-xs-8 edit-links-button-containers">
                                    {{input value=model.link class="edit-links-input"}}
                            </div>
                            <div class="col-xs-4 edit-links-button-containers">
                                <input class="btn btn-primary edit-links-button" type="submit">
                            </div>
                    </form>
                </div>
            {{/each}}
            <button class="btn btn-primary hide-links-modal-button">Done</button>
            
        </div>

    </div>



    {{!--Requests tables--}}
    <section class="tables-section round-top-coners">
        {{#if requestsRecieved}}
                <div class="row background-transparent">
                    <div class="col-sm-12">
                        <h2 {{action "toggleRecievedTable"}} class="toggleTableBtn">
                            <strong><span id="recieved-table-header" class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Membership Requests Recieved</strong>
                        </h2>
                    </div>
                </div>
                <div id="membership-requests-recieved-table" class="hidden-table">
                    <div class="row header-rows">
                        <div class = "col-md-4 col-sm-5">Name</div>
                        <div class = "col-md-4 col-sm-5 col-xs-hide">Activity</div>
                        <div class = "col-md-2 col-sm-hide">Time</div>
                        <div class = "col-sm-2 col-xs-hide">Options</div>
                    </div>
                    {{#each requestsRecieved as |req|}}
                        <div class="row entry-rows">
                            <div class="col-md-4 col-sm-5" onclick={{action "toggleRequestSent"}}> {{req.FirstName}} {{req.LastName}}</div>
                            <div class ="col-md-4 col-sm-5 col-xs-hide"> {{req.ActivityDescription}} </div>
                            <div class ="col-md-2 col-sm-hide"> {{req.DiffDays}} </div>
                            <div class ="col-sm-2 col-xs-hide">
                                {{#link-to "specific-activity" req.SessionCode req.ActivityCode}}
                                    <button class="btn button-navy  activity-buttons">See Activity</button>
                                {{/link-to}}
                            </div>
                        </div>
                    {{/each}}
                </div>
        {{/if}}
        {{!--Membership requests Sent table--}}
            <div class="row background-transparent">
                <div class="col-sm-12">
                    <h2 {{action "toggleSentTable"}} class="toggleTableBtn">
                        <strong><span id="sent-table-header" class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Membership Requests Sent</strong>
                    </h2>
                </div>
            </div>
            <div id="membership-requests-sent-table" class="hidden-table">
                {{#if model.requestsSent}}
                    <div class="row header-rows">
                        <div class = "col-md-5 col-sm-8">Activity</div>
                        <div class = "col-md-2 col-sm-hide">Decision</div>
                        <div class = "col-md-2 col-sm-hide">Time</div>
                        <div class = "col-md-3 col-sm-4 col-xs-hide">Options</div>
                    </div>
                    {{#each model.requestsSent as |req|}}
                        <div class="row entry-rows">
                            <div class="col-md-5 col-sm-8" onclick={{action "toggleRequestSent"}}> {{req.ActivityDescription}} </div>
                            <div class = "col-md-2 col-sm-hide"> {{req.RequestApproved}} </div>
                            <div class = "col-md-2 col-sm-hide"> {{req.DiffDays}} </div>
                            <div class = "col-md-3 col-sm-4 col-xs-hide">
                                {{#link-to "specific-activity" req.SessionCode req.ActivityCode}}
                                    <button class="btn button-navy  activity-buttons">See Activity</button>
                                {{/link-to}}
                                <button {{action "deleteRequest" req.RequestID}} class="btn button-red activity-buttons">Clear</button>
                            </div>
                        </div>
                    {{/each}}
                {{else}}
                <p class="empty-table-reminder">There are no pending requests</p>
                {{/if}}
            </div>
    {{!--Admin table--}}
        {{#if model.superGodMode}}
                <div class="row background-transparent">
                    <div class="col-sm-12">
                        <h2 {{action "toggleAdminTable"}} class="toggleTableBtn">
                            <strong><span id="admin-table-header" class="glyphicon glyphicon-menu-right" aria-hidden="true"></span> Admins</strong>
                        </h2>
                    </div>
                </div>
                <div id="admin-table"  class="hidden-table">
                    <div class="row header-rows">
                        <div class = "col-sm-5 col-xs-6">Name</div>
                        <div class = "col-sm-3 col-xs-hide">Super Admin</div>
                        <div class = "col-sm-4 col-xs-6">Options</div>
                    </div>
                    {{#each model.admins as |admin|}}
                        <div class="row entry-rows">
                            <div class="col-sm-5 col-xs-6"> {{admin.Name}}</div>
                            <div class = "col-sm-3 col-xs-hide"> {{if admin.superAdmin 'Yes' 'No'}} </div>
                            <div class = "col-sm-4 col-xs-6">
                                <button {{action "removeAdmin" admin.ID}} class="btn button-red table-button">Remove</button>
                            </div>
                        </div>
                    {{/each}}
                    {{#link-to "add-admin"}}
                        <button class="logout-btn btn button-navy">Add admin</button>
                    {{/link-to}}
                </div>
        {{/if}}
    </section>
</main>
